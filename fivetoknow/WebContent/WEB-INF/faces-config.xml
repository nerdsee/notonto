<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE faces-config PUBLIC
  "-//Sun Microsystems, Inc.//DTD JavaServer Faces Config 1.1//EN"
  "http://java.sun.com/dtd/web-facesconfig_1_1.dtd">
<faces-config>
	<application>
		<message-bundle>org.stoevesand.brain.i18n.MessagesBundle</message-bundle>

		<default-render-kit-id>org.apache.myfaces.trinidad.core</default-render-kit-id>

	</application>
	<managed-bean>
		<managed-bean-name>BrainSystem</managed-bean-name>
		<managed-bean-class>org.stoevesand.brain.BrainSystem</managed-bean-class>
		<managed-bean-scope>application</managed-bean-scope>
		<!-- 
			<managed-property>
			<property-name>database</property-name>
			<property-class>java.lang.String</property-class>
			<value>MySQL</value>
			</managed-property>
		-->
	</managed-bean>
	<managed-bean>
		<managed-bean-name>BrainSession</managed-bean-name>
		<managed-bean-class>org.stoevesand.brain.BrainSession</managed-bean-class>
		<managed-bean-scope>session</managed-bean-scope>
	</managed-bean>
	<managed-bean>
		<managed-bean-name>BrainMessage</managed-bean-name>
		<managed-bean-class>org.stoevesand.brain.BrainMessage</managed-bean-class>
		<managed-bean-scope>request</managed-bean-scope>
	</managed-bean>
	<managed-bean>
		<managed-bean-name>Auth</managed-bean-name>
		<managed-bean-class>org.stoevesand.brain.auth.Authorization</managed-bean-class>
		<managed-bean-scope>session</managed-bean-scope>
	</managed-bean>
	<managed-bean>
		<managed-bean-name>LastUserItem</managed-bean-name>
		<managed-bean-class>org.stoevesand.brain.model.UserItem</managed-bean-class>
		<managed-bean-scope>session</managed-bean-scope>
	</managed-bean>

	<managed-bean>
		<managed-bean-name>Chart</managed-bean-name>
		<managed-bean-class>org.stoevesand.brain.chart.Chart</managed-bean-class>
		<managed-bean-scope>application</managed-bean-scope>
	</managed-bean>

	<navigation-rule>
		<from-view-id>/index.jsp</from-view-id>
		<navigation-case>
			<from-outcome>login</from-outcome>
			<to-view-id>/user.jsp</to-view-id>
		</navigation-case>
	</navigation-rule>

	<navigation-rule>
		<from-view-id>/auth/unlocked.jsp</from-view-id>
		<navigation-case>
			<from-outcome>login</from-outcome>
			<to-view-id>/library.jsp</to-view-id>
		</navigation-case>
	</navigation-rule>

	<navigation-rule>
		<from-view-id>/auth/register.jsp</from-view-id>
		<navigation-case>
			<from-outcome>captcha</from-outcome>
			<to-view-id>/auth/captcha.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>passnomatch</from-outcome>
			<to-view-id>/auth/register.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>emailused</from-outcome>
			<to-view-id>/auth/emailused.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>error</from-outcome>
			<to-view-id>/auth/register.jsp</to-view-id>
		</navigation-case>
	</navigation-rule>
	<navigation-rule>
		<from-view-id>/auth/captcha.jsp</from-view-id>
		<navigation-case>
			<from-outcome>login</from-outcome>
			<to-view-id>/user.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>error</from-outcome>
			<to-view-id>/auth/register.jsp</to-view-id>
		</navigation-case>
	</navigation-rule>

	<navigation-rule>
		<from-view-id>/auth/unlock.jsp</from-view-id>
		<navigation-case>
			<from-outcome>unlocked</from-outcome>
			<to-view-id>/auth/unlocked.jsp</to-view-id>
		</navigation-case>
	</navigation-rule>

	<navigation-rule>
		<from-view-id>/edititem.jsp</from-view-id>
		<navigation-case>
			<from-outcome>ok</from-outcome>
			<to-view-id>/editlesson.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>user</from-outcome>
			<to-view-id>/editlesson.jsp</to-view-id>
		</navigation-case>
	</navigation-rule>

	<navigation-rule>
		<from-view-id>/newitem.jsp</from-view-id>
		<navigation-case>
			<from-outcome>ok</from-outcome>
			<to-view-id>/editlesson.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>user</from-outcome>
			<to-view-id>/editlesson.jsp</to-view-id>
		</navigation-case>
	</navigation-rule>

	<navigation-rule>
		<from-view-id>/admin/editnews.jsp</from-view-id>
		<navigation-case>
			<from-outcome>ok</from-outcome>
			<to-view-id>/admin/news.jsp</to-view-id>
		</navigation-case>
	</navigation-rule>

	<navigation-rule>
		<navigation-case>
			<from-outcome>lessonlist</from-outcome>
			<to-view-id>/teacher/index.jsp</to-view-id>
		</navigation-case>
	</navigation-rule>


	<!-- 
		GENERAL RULES
	-->
	<navigation-rule>
		<navigation-case>
			<from-outcome>logout</from-outcome>
			<to-view-id>/index.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>unlock</from-outcome>
			<to-view-id>/auth/unlock.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>fatal_DB</from-outcome>
			<to-view-id>/fatal.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>edititem</from-outcome>
			<to-view-id>/edititem.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>newitem</from-outcome>
			<to-view-id>/newitem.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>editnews</from-outcome>
			<to-view-id>/admin/editnews.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>editlesson</from-outcome>
			<to-view-id>/editlesson.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>newlesson</from-outcome>
			<to-view-id>/teacher/newlesson.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>editlessonmeta</from-outcome>
			<to-view-id>/editlessonmeta.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>lesson</from-outcome>
			<to-view-id>/lesson.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>validateUpload</from-outcome>
			<to-view-id>/validateupload.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>stat</from-outcome>
			<to-view-id>/stat.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>user</from-outcome>
			<to-view-id>/user.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>verw</from-outcome>
			<to-view-id>/subscribe.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>options</from-outcome>
			<to-view-id>/options.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>admin</from-outcome>
			<to-view-id>/admin/index.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>lib</from-outcome>
			<to-view-id>/library.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>subscribe</from-outcome>
			<to-view-id>/subscribe.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>register</from-outcome>
			<to-view-id>/auth/register.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>index</from-outcome>
			<to-view-id>/index.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>forgotpw</from-outcome>
			<to-view-id>/auth/forgotpw.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>reminded</from-outcome>
			<to-view-id>/auth/message.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>admin_user</from-outcome>
			<to-view-id>/admin/user.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>admin_upload</from-outcome>
			<to-view-id>/admin/upload.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>admin_news</from-outcome>
			<to-view-id>/admin/news.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>confLesson</from-outcome>
			<to-view-id>/lessonconf.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>confIntervals</from-outcome>
			<to-view-id>/intervals.jsp</to-view-id>
		</navigation-case>


		<navigation-case>
			<from-outcome>info_bg</from-outcome>
			<to-view-id>/info_bg.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>info_ls</from-outcome>
			<to-view-id>/info_ls.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>fbnew</from-outcome>
			<to-view-id>/fbnew.jsp</to-view-id>
		</navigation-case>

	</navigation-rule>
	<navigation-rule>
		<display-name>user</display-name>
		<from-view-id>/user.jsp</from-view-id>
		<navigation-case>
			<from-outcome>userLesson</from-outcome>
			<to-view-id>/lesson.jsp</to-view-id>
		</navigation-case>
	</navigation-rule>
	<navigation-rule>
		<display-name>lesson</display-name>
		<from-view-id>/lesson.jsp</from-view-id>
		<navigation-case>
			<from-outcome>back</from-outcome>
			<to-view-id>/user.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>correct</from-outcome>
			<to-view-id>/lesson.jsp</to-view-id>
		</navigation-case>
		<navigation-case>
			<from-outcome>wrong</from-outcome>
			<to-view-id>/lessonwrong.jsp</to-view-id>
		</navigation-case>
	</navigation-rule>
	<navigation-rule>
		<display-name>admin/index</display-name>
		<from-view-id>/admin/index.jsp</from-view-id>
		<navigation-case>
			<from-outcome>ok</from-outcome>
			<to-view-id>/admin/index.jsp</to-view-id>
		</navigation-case>
	</navigation-rule>

	<lifecycle>
		<phase-listener>org.stoevesand.brain.chart.ChartListener</phase-listener>
	</lifecycle>


	<!-- additional "by type" converters -->

	<converter>
		<converter-for-class>java.math.BigDecimal</converter-for-class>
		<converter-class>javax.faces.convert.BigDecimalConverter</converter-class>
	</converter>

	<converter>
		<converter-for-class>java.math.BigInteger</converter-for-class>
		<converter-class>javax.faces.convert.BigIntegerConverter</converter-class>
	</converter>

	<converter>
		<converter-for-class>java.util.Date</converter-for-class>
		<converter-class>javax.faces.convert.DateTimeConverter</converter-class>
	</converter>



</faces-config>